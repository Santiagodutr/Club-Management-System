---
import logoCorpmeta from '../assets/logo_corpmeta.png'
import faviconIco from '../assets/logo_corpmeta.ico'

interface Props {
  title?: string
  active?: 'reservas' | 'espacios' | 'reportes' | 'login' | 'eventos' | 'datos-empresa' | 'parametros' | 'socios'
}

const { title = 'Panel Admin - Club del Meta', active = 'reservas' } = Astro.props as Props
---

<!DOCTYPE html>
<html lang="es" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <link rel="icon" type="image/x-icon" href={faviconIco} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Bebas+Neue&display=swap" rel="stylesheet" />

    <!-- ================================================
         GLOBAL STYLES — apply to all child page elements
         ================================================ -->
    <style is:global>
      /* -------- CSS VARIABLES -------- */
      :root, [data-theme="dark"] {
        color-scheme: dark;
        --bg: #020617;
        --sidebar-bg: rgba(15, 23, 42, 0.97);
        --card-bg: rgba(30, 41, 59, 0.5);
        --card-border: rgba(255, 255, 255, 0.08);
        --surface: rgba(255, 255, 255, 0.04);
        --surface-hover: rgba(255, 255, 255, 0.07);
        --text: #f8fafc;
        --text-muted: #94a3b8;
        --text-faint: rgba(148, 163, 184, 0.4);
        --primary: #3b82f6;
        --primary-hover: #2563eb;
        --border: rgba(255, 255, 255, 0.1);
        --border-hover: rgba(255, 255, 255, 0.2);
        --input-bg: rgba(255, 255, 255, 0.05);
        --input-border: rgba(255, 255, 255, 0.12);
        --modal-bg: #0f172a;
        --table-header: rgba(255, 255, 255, 0.03);
        --table-border: rgba(255, 255, 255, 0.06);
        --table-hover: rgba(255, 255, 255, 0.04);
        --shadow: 0 25px 60px -15px rgba(0, 0, 0, 0.5);
      }

      [data-theme="light"] {
        color-scheme: light;
        --bg: #f1f5f9;
        --sidebar-bg: #1e3a5f;
        --card-bg: #ffffff;
        --card-border: #e2e8f0;
        --surface: #f8fafc;
        --surface-hover: #f1f5f9;
        --text: #0f172a;
        --text-muted: #64748b;
        --text-faint: #94a3b8;
        --primary: #2563eb;
        --primary-hover: #1d4ed8;
        --border: #e2e8f0;
        --border-hover: #cbd5e1;
        --input-bg: #ffffff;
        --input-border: #e2e8f0;
        --modal-bg: #ffffff;
        --table-header: #f8fafc;
        --table-border: #f1f5f9;
        --table-hover: #f8fafc;
        --shadow: 0 4px 24px rgba(15, 23, 42, 0.08);
      }

      /* -------- BASE RESET -------- */
      *, *::before, *::after { box-sizing: border-box; }

      html, body {
        margin: 0;
        padding: 0;
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
        background: var(--bg);
        color: var(--text);
        overflow-x: hidden;
        transition: background 0.3s ease, color 0.3s ease;
      }

      a { color: inherit; text-decoration: none; }

      /* -------- TYPOGRAPHY (page-scope only, not sidebar) -------- */
      .panel h1 {
        font-family: 'Bebas Neue', sans-serif;
        font-size: 3rem;
        margin: 0;
        color: var(--text);
        letter-spacing: 0.02em;
        line-height: 1;
      }

      .panel h2 {
        font-family: 'Bebas Neue', sans-serif;
        font-size: 1.6rem;
        margin: 0;
        color: var(--text);
        letter-spacing: 0.02em;
        line-height: 1.1;
      }

      .panel h3 {
        font-size: 1rem;
        font-weight: 700;
        margin: 0;
        color: var(--text);
      }

      .text-accent { color: var(--primary); }

      /* -------- PAGE HEADER -------- */
      .panel {
        width: 100%;
      }

      .panel__header {
        display: flex;
        justify-content: space-between;
        gap: 1.5rem;
        align-items: flex-end;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .eyebrow {
        text-transform: uppercase;
        letter-spacing: 0.15rem;
        font-size: 0.7rem;
        font-weight: 700;
        color: var(--primary);
        margin: 0 0 0.3rem;
      }

      .muted {
        color: var(--text-muted);
        margin: 0.5rem 0 0;
        max-width: 600px;
        font-size: 0.95rem;
        font-weight: 300;
        line-height: 1.6;
      }

      /* -------- CARDS -------- */
      .card {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 16px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        margin-bottom: 1.25rem;
        transition: background 0.3s ease, border-color 0.3s ease;
        overflow: hidden;
      }

      .card__header {
        display: flex;
        justify-content: space-between;
        gap: 1rem;
        align-items: flex-start;
        flex-wrap: wrap;
        margin-bottom: 1.25rem;
      }

      /* -------- BUTTONS -------- */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.4rem;
        border: 1px solid transparent;
        border-radius: 10px;
        padding: 0.6rem 1.1rem;
        font-weight: 600;
        font-size: 0.875rem;
        cursor: pointer;
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
        transition: all 0.2s ease;
        white-space: nowrap;
        text-decoration: none;
        line-height: 1;
      }

      .btn.primary {
        background: var(--primary);
        color: #fff;
        border-color: var(--primary);
        box-shadow: 0 4px 14px rgba(59, 130, 246, 0.35);
      }

      .btn.primary:hover {
        background: var(--primary-hover);
        border-color: var(--primary-hover);
        transform: translateY(-1px);
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.45);
      }

      .btn.secondary {
        background: rgba(59, 130, 246, 0.1);
        color: #93c5fd;
        border-color: rgba(59, 130, 246, 0.25);
      }

      .btn.secondary:hover {
        background: rgba(59, 130, 246, 0.18);
        transform: translateY(-1px);
      }

      [data-theme="light"] .btn.secondary {
        background: #eff6ff;
        color: #1d4ed8;
        border-color: #bfdbfe;
      }

      .btn.ghost {
        background: transparent;
        color: var(--text-muted);
        border-color: var(--border);
      }

      .btn.ghost:hover {
        background: var(--surface);
        color: var(--text);
        border-color: var(--border-hover);
      }

      .btn.danger {
        background: rgba(239, 68, 68, 0.1);
        color: #f87171;
        border-color: rgba(239, 68, 68, 0.25);
      }

      .btn.danger:hover {
        background: rgba(239, 68, 68, 0.18);
        transform: translateY(-1px);
      }

      [data-theme="light"] .btn.danger {
        background: #fef2f2;
        color: #dc2626;
        border-color: #fecaca;
      }

      .btn:disabled {
        opacity: 0.45;
        cursor: not-allowed;
        transform: none !important;
        box-shadow: none !important;
      }

      .actions {
        display: flex;
        gap: 0.6rem;
        align-items: center;
        flex-wrap: wrap;
      }

      /* -------- FORM ELEMENTS -------- */
      /* Labels — plain styling, do NOT force uppercase globally */
      label {
        display: flex;
        flex-direction: column;
        gap: 0.35rem;
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text-muted);
      }

      .checkbox-label {
        flex-direction: row !important;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem !important;
        font-weight: 500 !important;
        color: var(--text) !important;
        cursor: pointer;
        text-transform: none !important;
        letter-spacing: 0 !important;
      }

      .checkbox-label input[type="checkbox"] {
        width: 17px;
        height: 17px;
        cursor: pointer;
        accent-color: var(--primary);
        flex-shrink: 0;
      }

      select,
      input[type="text"],
      input[type="email"],
      input[type="tel"],
      input[type="number"],
      input[type="password"],
      input[type="date"],
      input[type="time"],
      textarea {
        background: var(--input-bg);
        border: 1px solid var(--input-border);
        border-radius: 9px;
        padding: 0.6rem 0.85rem;
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
        font-size: 0.875rem;
        font-weight: 400;
        color: var(--text);
        width: 100%;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
        appearance: auto;
      }

      select:focus,
      input:focus,
      textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
      }

      [data-theme="light"] select,
      [data-theme="light"] input[type="text"],
      [data-theme="light"] input[type="email"],
      [data-theme="light"] input[type="tel"],
      [data-theme="light"] input[type="number"],
      [data-theme="light"] input[type="password"],
      [data-theme="light"] input[type="date"],
      [data-theme="light"] input[type="time"],
      [data-theme="light"] textarea {
        background: #ffffff;
        border-color: #e2e8f0;
        color: #0f172a;
      }

      select option { background: #0f172a; color: #f8fafc; }
      [data-theme="light"] select option { background: #ffffff; color: #0f172a; }

      input::placeholder,
      textarea::placeholder { color: var(--text-faint); }
      textarea { resize: vertical; }

      .input-hint {
        font-size: 0.78rem;
        color: var(--text-faint);
        font-weight: 400;
      }

      /* -------- ACTION ROWS -------- */
      .filters,
      .filters-bar {
        display: flex;
        gap: 1rem;
        align-items: flex-end;
        flex-wrap: wrap;
      }

      /* -------- BADGES -------- */
      .badge {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.6rem;
        border-radius: 99px;
        font-size: 0.72rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        white-space: nowrap;
      }

      .badge-success,
      .badge--aceptada,
      .badge-estado.aceptada {
        background: rgba(52, 211, 153, 0.1);
        color: #34d399;
        border: 1px solid rgba(52, 211, 153, 0.2);
      }

      .badge-warning,
      .badge--pendiente,
      .badge-estado.pendiente {
        background: rgba(251, 191, 36, 0.1);
        color: #fbbf24;
        border: 1px solid rgba(251, 191, 36, 0.2);
      }

      .badge-danger,
      .badge--rechazada,
      .badge-estado.rechazada {
        background: rgba(248, 113, 113, 0.1);
        color: #f87171;
        border: 1px solid rgba(248, 113, 113, 0.2);
      }

      .badge-info,
      .badge--abonado {
        background: rgba(167, 139, 250, 0.1);
        color: #a78bfa;
        border: 1px solid rgba(167, 139, 250, 0.2);
      }

      .badge-inactive {
        background: var(--surface);
        color: var(--text-muted);
        border: 1px solid var(--border);
      }

      [data-theme="light"] .badge-success,
      [data-theme="light"] .badge--aceptada,
      [data-theme="light"] .badge-estado.aceptada { background: #d1fae5; color: #065f46; border-color: #a7f3d0; }
      [data-theme="light"] .badge-warning,
      [data-theme="light"] .badge--pendiente,
      [data-theme="light"] .badge-estado.pendiente { background: #fef9c3; color: #854d0e; border-color: #fde047; }
      [data-theme="light"] .badge-danger,
      [data-theme="light"] .badge--rechazada,
      [data-theme="light"] .badge-estado.rechazada { background: #fee2e2; color: #991b1b; border-color: #fecaca; }

      /* -------- PILL -------- */
      .pill {
        display: inline-flex; align-items: center; gap: 0.3rem;
        padding: 0.25rem 0.65rem; border-radius: 99px; font-size: 0.78rem;
        font-weight: 600; border: 1px solid var(--border);
        background: var(--surface); color: var(--text-muted);
      }
      .pill-active { background: rgba(52,211,153,0.1); color: #34d399; border-color: rgba(52,211,153,0.2); }
      .pill-inactive { background: rgba(248,113,113,0.08); color: #f87171; border-color: rgba(248,113,113,0.2); }
      [data-theme="light"] .pill-active { background: #d1fae5; color: #166534; border-color: #bbf7d0; }
      [data-theme="light"] .pill-inactive { background: #fee2e2; color: #b91c1c; border-color: #fecaca; }

      /* -------- TABLES -------- */
      .table-wrapper,
      .table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        width: 100%;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.875rem;
      }

      thead { background: var(--table-header); }

      thead th {
        text-align: left;
        padding: 0.8rem 1rem;
        font-size: 0.7rem;
        font-weight: 700;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.06em;
        white-space: nowrap;
        border-bottom: 1px solid var(--table-border);
      }

      thead th:first-child { padding-left: 1.25rem; }
      thead th:last-child { text-align: center; }

      tbody tr {
        border-bottom: 1px solid var(--table-border);
        transition: background 0.15s ease;
      }

      tbody tr:hover { background: var(--table-hover); }
      tbody tr:last-child { border-bottom: none; }

      tbody td {
        padding: 1rem;
        color: var(--text);
        vertical-align: middle;
        font-size: 0.875rem;
      }

      tbody td:first-child { padding-left: 1.25rem; }
      tbody td.placeholder,
      td.placeholder {
        text-align: center;
        color: var(--text-faint);
        padding: 3rem;
        font-style: italic;
      }

      tbody tr.inactivo { opacity: 0.5; }

      /* -------- ACTION BUTTONS IN TABLES -------- */
      .btn-action {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.4rem 0.75rem;
        border-radius: 8px;
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
        font-size: 0.78rem;
        font-weight: 600;
        cursor: pointer;
        border: 1px solid transparent;
        transition: all 0.2s ease;
        white-space: nowrap;
        line-height: 1;
      }

      .btn-action.edit {
        background: rgba(59, 130, 246, 0.1);
        color: #93c5fd;
        border-color: rgba(59, 130, 246, 0.2);
      }
      .btn-action.edit:hover { background: rgba(59,130,246,0.18); transform: translateY(-1px); }

      .btn-action.delete {
        background: rgba(248, 113, 113, 0.08);
        color: #f87171;
        border-color: rgba(248, 113, 113, 0.2);
      }
      .btn-action.delete:hover { background: rgba(248,113,113,0.16); transform: translateY(-1px); }

      .btn-action.toggle-on {
        background: rgba(251, 146, 60, 0.1);
        color: #fb923c;
        border-color: rgba(251, 146, 60, 0.2);
      }
      .btn-action.toggle-on:hover { background: rgba(251,146,60,0.18); transform: translateY(-1px); }

      .btn-action.toggle-off {
        background: rgba(52, 211, 153, 0.1);
        color: #34d399;
        border-color: rgba(52, 211, 153, 0.2);
      }
      .btn-action.toggle-off:hover { background: rgba(52,211,153,0.18); transform: translateY(-1px); }

      [data-theme="light"] .btn-action.edit { background: #eff6ff; color: #1e40af; border-color: #bfdbfe; }
      [data-theme="light"] .btn-action.delete { background: #fef2f2; color: #b91c1c; border-color: #fecaca; }

      .servicio-actions,
      .espacio-actions { display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap; }

      /* -------- MODALS -------- */
      .hidden { display: none !important; }

      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(2, 6, 23, 0.8);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        padding: 1.5rem;
        opacity: 1;
        transition: opacity 0.25s ease;
      }

      .modal-overlay.hidden {
        display: none !important;
        opacity: 0;
        pointer-events: none;
      }

      .modal {
        background: var(--modal-bg);
        border: 1px solid var(--card-border);
        border-radius: 18px;
        padding: 0;
        max-width: 520px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 40px 80px -20px rgba(0, 0, 0, 0.6);
      }

      .modal__header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.25rem 1.5rem;
        border-bottom: 1px solid var(--border);
      }

      .modal__header h3 {
        margin: 0;
        font-size: 1.05rem;
        font-weight: 700;
        color: var(--text);
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
      }

      .modal__body {
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .modal__footer,
      .modal__actions {
        display: flex;
        gap: 0.65rem;
        justify-content: flex-end;
        padding: 1.25rem 1.5rem;
        border-top: 1px solid var(--border);
        flex-wrap: wrap;
      }

      .btn-close {
        background: var(--surface);
        border: 1px solid var(--border);
        color: var(--text-muted);
        width: 30px;
        height: 30px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.1rem;
        line-height: 1;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .btn-close:hover { background: var(--surface-hover); color: var(--text); }

      /* Confirm modal */
      .modal-confirm {
        background: var(--modal-bg);
        border: 1px solid var(--card-border);
        border-radius: 18px;
        padding: 2rem;
        max-width: 440px;
        width: 100%;
        text-align: center;
        box-shadow: 0 40px 80px -20px rgba(0, 0, 0, 0.6);
      }

      .modal-confirm__icon {
        width: 68px;
        height: 68px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.25rem;
        background: rgba(248, 113, 113, 0.1);
        color: #f87171;
      }

      .modal-confirm__title {
        font-size: 1.35rem;
        font-weight: 700;
        color: var(--text);
        margin: 0 0 0.65rem;
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
      }

      .modal-confirm__message {
        color: var(--text-muted);
        line-height: 1.6;
        margin: 0 0 1.5rem;
        font-size: 0.9rem;
      }

      .modal-confirm__message strong { color: var(--text); font-weight: 600; }

      .modal-confirm__actions {
        display: flex;
        gap: 0.65rem;
        justify-content: center;
      }

      .modal-confirm__actions .btn {
        flex: 1;
        justify-content: center;
        max-width: 160px;
      }

      /* Publicar modal */
      .modal-publicar {
        background: var(--modal-bg);
        border: 1px solid var(--card-border);
        border-radius: 18px;
        padding: 1.75rem;
        max-width: 500px;
        width: 100%;
        box-shadow: 0 40px 80px -20px rgba(0, 0, 0, 0.6);
      }

      .modal-publicar__title {
        font-size: 1.25rem;
        font-weight: 700;
        margin: 0 0 1rem;
        color: var(--text);
      }

      .modal-publicar__info {
        background: rgba(52, 211, 153, 0.06);
        border-left: 3px solid #34d399;
        padding: 1rem;
        border-radius: 0 10px 10px 0;
        margin-bottom: 1.25rem;
      }

      .modal-publicar__info p {
        margin: 0 0 0.4rem;
        color: var(--text-muted);
        font-size: 0.875rem;
      }

      .modal-publicar__info p:last-child { margin: 0; }

      .modal-publicar__mensaje {
        padding: 0.75rem 1rem;
        border-radius: 9px;
        font-size: 0.875rem;
        text-align: center;
        margin-bottom: 1rem;
      }

      .modal-publicar__mensaje.exito { background: rgba(52,211,153,0.1); color: #34d399; }
      .modal-publicar__mensaje.error { background: rgba(248,113,113,0.1); color: #f87171; }
      .modal-publicar__mensaje.info { background: rgba(59,130,246,0.1); color: #93c5fd; }

      .modal-publicar__actions {
        display: flex;
        gap: 0.65rem;
        justify-content: flex-end;
      }

      .modal-publicar__actions .btn { flex: 1; justify-content: center; }

      /* -------- FORM FEEDBACK -------- */
      .mensaje {
        padding: 0.65rem 1rem;
        border-radius: 8px;
        font-size: 0.875rem;
      }
      .mensaje.success { background: rgba(52,211,153,0.1); color: #34d399; }
      .mensaje.error { background: rgba(248,113,113,0.1); color: #f87171; }
      .mensaje.hidden { display: none; }

      .campo-changed { border-color: #fbbf24 !important; }

      /* field display (datos-empresa) */
      .field-display {
        padding: 0.6rem 0.85rem;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 9px;
        color: var(--text);
        min-height: 40px;
        display: flex;
        align-items: center;
        font-size: 0.875rem;
      }
      .field-display:empty::before {
        content: 'Sin información';
        color: var(--text-faint);
        font-style: italic;
      }

      /* -------- MISC UTILITIES -------- */
      .placeholder {
        padding: 3rem;
        text-align: center;
        color: var(--text-faint);
        font-size: 0.875rem;
        font-style: italic;
      }

      .stat { font-size: 0.85rem; color: var(--text-muted); font-weight: 600; }
      .stats { display: flex; gap: 1rem; }

      .subcard {
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1.1rem;
        background: var(--surface);
      }

      .subcard__header {
        display: flex;
        justify-content: space-between;
        gap: 1rem;
        align-items: center;
        flex-wrap: wrap;
        margin-bottom: 0.75rem;
      }

      /* link action buttons (espacios) */
      .link {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.4rem 0.7rem;
        border-radius: 8px;
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
        font-size: 0.78rem;
        font-weight: 600;
        cursor: pointer;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--text-muted);
        transition: all 0.2s ease;
        text-decoration: none;
      }
      .link:hover { background: var(--surface-hover); color: var(--text); }
      .link.danger { background: rgba(248,113,113,0.08); color: #f87171; border-color: rgba(248,113,113,0.2); }

      /* -------- TOAST -------- */
      .toast-container {
        position: fixed;
        top: 1.25rem;
        right: 1.25rem;
        z-index: 4000;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        max-width: 380px;
        pointer-events: none;
      }

      .toast {
        pointer-events: auto;
        background: var(--modal-bg);
        border: 1px solid var(--card-border);
        border-radius: 12px;
        padding: 0.875rem 1.1rem;
        box-shadow: 0 8px 25px rgba(0,0,0,0.35);
        display: flex;
        align-items: center;
        gap: 0.65rem;
        border-left: 3px solid var(--primary);
        animation: toastIn 0.3s ease;
        color: var(--text);
        font-size: 0.875rem;
      }

      .toast.success { border-left-color: #34d399; }
      .toast.error { border-left-color: #f87171; }
      .toast.warning { border-left-color: #fbbf24; }
      .toast-message { flex: 1; line-height: 1.4; }
      .toast-close { background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 1rem; padding: 0; display: flex; align-items: center; }
      .toast.removing { animation: toastOut 0.3s ease forwards; }

      /* -------- GLOBAL NOTIFICATIONS -------- */
      .mensaje-exito,
      .mensaje-error,
      .mensaje-confirmacion {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.65rem;
        padding: 0.875rem 1.25rem;
        border-radius: 10px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.25);
        font-weight: 600;
        font-size: 0.875rem;
        animation: slideInUp 0.3s ease;
        z-index: 3500;
      }

      .mensaje-exito,
      .mensaje-confirmacion { background: #059669; color: white; }
      .mensaje-error { background: #dc2626; color: white; }

      /* -------- PAGINATION -------- */
      .pagination { display: flex; justify-content: center; align-items: center; gap: 0.4rem; margin-top: 1.5rem; padding: 0.75rem; flex-wrap: wrap; }

      .pagination-btn {
        min-width: 36px;
        height: 36px;
        padding: 0.4rem 0.6rem;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--text-muted);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
        font-size: 0.875rem;
      }

      .pagination-btn:hover:not(:disabled) {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        transform: translateY(-1px);
      }

      .pagination-btn.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        font-weight: 700;
      }

      .pagination-btn:disabled { opacity: 0.35; cursor: not-allowed; }
      .pagination-ellipsis { color: var(--text-faint); padding: 0.4rem; user-select: none; }

      /* -------- ANIMATIONS -------- */
      @keyframes toastIn { from { transform: translateX(120%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
      @keyframes toastOut { from { transform: translateX(0); opacity: 1; } to { transform: translateX(120%); opacity: 0; } }
      @keyframes slideInUp { from { transform: translateY(120%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>

    <!-- SCOPED styles — layout skeleton only -->
    <style>
      /* -------- LAYOUT -------- */
      .layout {
        display: block;
        min-height: 100vh;
      }

      /* -------- SIDEBAR -------- */
      .sidebar {
        background: var(--sidebar-bg);
        border-right: 1px solid var(--border);
        padding: 2rem 1.25rem;
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        position: fixed;
        top: 0;
        left: 0;
        width: 260px;
        height: 100vh;
        z-index: 100;
        overflow-y: auto;
        transition: background 0.3s ease, left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 0.875rem;
        padding: 0 0.25rem;
        flex-shrink: 0;
      }

      .brand-logo {
        width: 40px;
        height: auto;
        flex-shrink: 0;
        opacity: 0.92;
      }

      .brand-name { font-weight: 700; font-size: 0.95rem; color: white; line-height: 1.15; }
      .brand-sub { font-size: 0.68rem; color: rgba(255,255,255,0.45); line-height: 1; }

      nav {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
        flex: 1;
      }

      .nav-item {
        padding: 0.7rem 0.875rem;
        border-radius: 10px;
        color: rgba(255, 255, 255, 0.45);
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 0.65rem;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 0.875rem;
        border: 1px solid transparent;
        background: none;
        cursor: pointer;
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
        text-align: left;
        width: 100%;
        text-decoration: none;
        line-height: 1;
      }

      .nav-item:hover {
        color: white;
        background: rgba(255,255,255,0.06);
        border-color: rgba(255,255,255,0.06);
        transform: translateX(2px);
      }

      .nav-item.active {
        color: white;
        background: rgba(59,130,246,0.15);
        border-color: rgba(59,130,246,0.3);
        box-shadow: 0 2px 12px rgba(59,130,246,0.2);
      }

      .nav-item svg { flex-shrink: 0; opacity: 0.7; transition: opacity 0.2s; }
      .nav-item:hover svg, .nav-item.active svg { opacity: 1; }

      .bottom-actions {
        flex-shrink: 0;
        padding-top: 1rem;
        border-top: 1px solid rgba(255,255,255,0.08);
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      /* Theme Toggle */
      .theme-toggle {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.65rem 0.875rem;
        border-radius: 10px;
        color: rgba(255,255,255,0.45);
        font-size: 0.8rem;
        font-weight: 500;
        cursor: pointer;
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.06);
        margin-bottom: 0.25rem;
        transition: all 0.3s ease;
        font-family: 'Outfit', system-ui, -apple-system, sans-serif;
        width: 100%;
      }

      .theme-toggle:hover { background: rgba(255,255,255,0.08); color: white; }

      .theme-toggle__track {
        width: 34px;
        height: 18px;
        background: rgba(255,255,255,0.15);
        border-radius: 99px;
        position: relative;
        transition: background 0.3s ease;
        flex-shrink: 0;
      }

      .theme-toggle__track::after {
        content: '';
        position: absolute;
        top: 3px;
        left: 3px;
        width: 12px;
        height: 12px;
        background: white;
        border-radius: 50%;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      [data-theme="light"] .theme-toggle__track { background: var(--primary); }
      [data-theme="light"] .theme-toggle__track::after { transform: translateX(16px); }

      /* Main content */
      .content {
        padding: 2.5rem 3rem;
        min-width: 0;
        width: calc(100% - 260px);
        max-width: 1400px;
        margin-left: 260px;
        min-height: 100vh;
        box-sizing: border-box;
      }

      /* Mobile */
      .mobile-menu-btn {
        display: none;
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1001;
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 0.65rem;
        cursor: pointer;
        color: var(--text);
        transition: all 0.2s ease;
      }

      .sidebar-overlay {
        position: fixed;
        inset: 0;
        background: rgba(2,6,23,0.8);
        backdrop-filter: blur(4px);
        z-index: 999;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .sidebar-overlay.active { opacity: 1; visibility: visible; }

      /* -------- RESPONSIVE -------- */
      @media (max-width: 1024px) {
        .sidebar {
          left: -280px;
        }

        .sidebar.active { left: 0; box-shadow: 20px 0 60px rgba(0,0,0,0.4); }
        .mobile-menu-btn { display: flex; align-items: center; justify-content: center; }
        .content { padding: 5.5rem 1.25rem 2rem; margin-left: 0; width: 100%; }
      }

      @media (max-width: 640px) {
        .content { padding: 5rem 1rem 1.5rem; }
        .panel__header { flex-direction: column; align-items: flex-start; margin-bottom: 1.25rem; }
        .panel .actions { width: 100%; }
        .panel .actions .btn { flex: 1; justify-content: center; }
        .panel h1 { font-size: 2.25rem; }
      }
    </style>
  </head>
  <body>
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Menú">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="layout">
      <aside class="sidebar" id="sidebar">
        <div class="brand">
          <img src={logoCorpmeta.src} alt="Club del Meta" class="brand-logo" />
          <div>
            <div class="brand-name">Club del Meta</div>
            <div class="brand-sub">Panel Administrativo</div>
          </div>
        </div>

        <nav>
          <a class={`nav-item ${active === 'reservas' ? 'active' : ''}`} href="/admin/reservas">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
            Reservas
          </a>
          <a class={`nav-item ${active === 'espacios' ? 'active' : ''}`} href="/admin/espacios">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            Espacios
          </a>
          <a class={`nav-item ${active === 'socios' ? 'active' : ''}`} href="/admin/socios">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
            Socios
          </a>
          <a class={`nav-item ${active === 'eventos' ? 'active' : ''}`} href="/admin/eventos">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"></path></svg>
            Eventos
          </a>
          <a class={`nav-item ${active === 'reportes' ? 'active' : ''}`} href="/admin/reportes">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>
            Reportes
          </a>
          <a class={`nav-item ${active === 'parametros' ? 'active' : ''}`} href="/admin/parametros-adicionales">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.07 4.93l-1.41 1.41M4.93 19.07l1.41-1.41M4.93 4.93l1.41 1.41M19.07 19.07l-1.41-1.41M12 2v2M12 20v2M2 12h2M20 12h2"></path></svg>
            Servicios
          </a>
          <a class={`nav-item ${active === 'datos-empresa' ? 'active' : ''}`} href="/admin/datos-empresa">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v16m14 0H5m14 0h2M5 21H3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 8h6v-4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4"></path></svg>
            Empresa
          </a>
        </nav>

        <div class="bottom-actions">
          <button class="theme-toggle" id="themeToggle">
            <span id="themeLabel">Modo Claro</span>
            <div class="theme-toggle__track" id="themeTrack"></div>
          </button>
          <a class="nav-item" href="/" target="_blank" rel="noopener noreferrer">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
            Ver Sitio
          </a>
          <button class="nav-item" id="logoutBtn">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
            Cerrar Sesión
          </button>
        </div>
      </aside>

      <main class="content">
        <slot />
      </main>
    </div>

    <script>
      import { checkAuthOnLoad, setupGlobalAuthInterceptor, setupAutoTokenRefresh } from '../lib/auth-guard'

      document.addEventListener('DOMContentLoaded', () => {
        checkAuthOnLoad()
        setupGlobalAuthInterceptor()
        setupAutoTokenRefresh()

        // LOGOUT
        document.getElementById('logoutBtn')?.addEventListener('click', () => {
          localStorage.removeItem('adminAuth')
          sessionStorage.clear()
          window.location.href = '/admin/login'
        })

        // THEME TOGGLE
        const html = document.documentElement
        const themeLabel = document.getElementById('themeLabel')

        function applyTheme(theme: string) {
          html.setAttribute('data-theme', theme)
          localStorage.setItem('adminTheme', theme)
          if (themeLabel) themeLabel.textContent = theme === 'dark' ? 'Modo Claro' : 'Modo Oscuro'
        }

        applyTheme(localStorage.getItem('adminTheme') || 'dark')

        document.getElementById('themeToggle')?.addEventListener('click', () => {
          applyTheme((html.getAttribute('data-theme') || 'dark') === 'dark' ? 'light' : 'dark')
        })

        // MOBILE MENU
        const mobileMenuBtn = document.getElementById('mobileMenuBtn')
        const sidebar = document.getElementById('sidebar')
        const sidebarOverlay = document.getElementById('sidebarOverlay')

        function openSidebar() {
          sidebar?.classList.add('active')
          sidebarOverlay?.classList.add('active')
          document.body.style.overflow = 'hidden'
        }

        function closeSidebar() {
          sidebar?.classList.remove('active')
          sidebarOverlay?.classList.remove('active')
          document.body.style.overflow = ''
        }

        mobileMenuBtn?.addEventListener('click', openSidebar)
        sidebarOverlay?.addEventListener('click', closeSidebar)
        sidebar?.querySelectorAll('a.nav-item').forEach(item => {
          item.addEventListener('click', () => { if (window.innerWidth <= 1024) closeSidebar() })
        })
        window.addEventListener('resize', () => { if (window.innerWidth > 1024) closeSidebar() })
      })
    </script>
  </body>
</html>
