---
import AdminLayout from '../../layouts/AdminLayout.astro'

export const prerender = false
---

<AdminLayout title="Reservas - Club del Meta" active="reservas">
  <section class="panel animate-fade-in">
    <header class="panel__header">
      <div class="animate-slide-up" style="animation-delay: 0.1s;">
        <p class="eyebrow">Administración</p>
        <h1>Panel de <span class="text-accent">Reservas</span></h1>
        <p class="muted">Gestiona cotizaciones, confirma reservas y controla pagos.</p>
      </div>
      <div class="view-toggle animate-slide-up" style="animation-delay: 0.2s;">
        <button id="btnVistaCalendario" class="view-toggle__btn active" data-view="calendario">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          Calendario
        </button>
        <button id="btnVistaLista" class="view-toggle__btn" data-view="lista">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="8" y1="6" x2="21" y2="6"></line>
            <line x1="8" y1="12" x2="21" y2="12"></line>
            <line x1="8" y1="18" x2="21" y2="18"></line>
            <line x1="3" y1="6" x2="3.01" y2="6"></line>
            <line x1="3" y1="12" x2="3.01" y2="12"></line>
            <line x1="3" y1="18" x2="3.01" y2="18"></line>
          </svg>
          Lista
        </button>
      </div>
    </header>

    <!-- Filters Card -->
    <section class="card filters-card animate-slide-up" style="animation-delay: 0.25s;">
      <div class="filters">
        <div class="filter-group">
          <label for="fBuscarId">Buscar ID</label>
          <input type="text" id="fBuscarId" placeholder="Ej: #1234">
        </div>
        <div class="filter-group">
          <label for="fOrden">Ordenar</label>
          <select id="fOrden">
            <option value="reciente">Más reciente</option>
            <option value="antigua">Más antigua</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="fSalon">Salón</label>
          <select id="fSalon">
            <option value="">Todos</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="fEstado">Estado</label>
          <select id="fEstado">
            <option value="">Todos</option>
            <option value="Pendiente">Pendiente</option>
            <option value="Aceptada">Aceptada</option>
            <option value="Rechazada">Rechazada</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="fPago">Pago</label>
          <select id="fPago">
            <option value="">Todos</option>
            <option value="sin_pagar">Sin pagar</option>
            <option value="abonado">Abonado</option>
            <option value="pagado">Pagado</option>
          </select>
        </div>
      </div>
    </section>

    <!-- CALENDAR VIEW -->
    <div id="vistaCalendario" class="vista-content active">
      <section class="card animate-slide-up" style="animation-delay: 0.3s;">
        <div class="card__header">
          <div>
            <p id="eyebrowVista" class="eyebrow">Vista Mensual</p>
            <h2>Cotizaciones y Reservas</h2>
          </div>
        </div>
        <div class="calendar">
          <div class="calendar__header">
            <div class="calendar__nav">
              <button id="prevMonth" class="btn-nav" aria-label="Mes anterior">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"></polyline></svg>
              </button>
              <h3 id="monthLabel"></h3>
              <button id="nextMonth" class="btn-nav" aria-label="Mes siguiente">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"></polyline></svg>
              </button>
            </div>
            <div class="calendar__legend">
              <span class="dot dot--event"></span>
              <span>Eventos</span>
            </div>
          </div>
          <div class="calendar__weekdays">
            <span>Lun</span><span>Mar</span><span>Mié</span><span>Jue</span><span>Vie</span><span>Sáb</span><span>Dom</span>
          </div>
          <div id="calendarDays" class="calendar__grid">
            <div class="placeholder">Cargando calendario...</div>
          </div>
        </div>
      </section>

      <section id="detalleDelDia" class="card animate-slide-up" style="animation-delay: 0.4s;">
        <div class="card__header">
          <div>
            <p class="eyebrow">Resumen Diario</p>
            <h2 id="dayTitle">Selecciona una fecha</h2>
          </div>
        </div>
        <div id="dayList" class="day-list">
          <div class="placeholder">Elige una fecha en el calendario para ver reservas.</div>
        </div>
      </section>
    </div>

    <!-- LIST VIEW -->
    <div id="vistaLista" class="vista-content">
      <section class="card animate-slide-up" style="animation-delay: 0.3s;">
        <div class="card__header">
          <div>
            <p class="eyebrow">Vista Completa</p>
            <h2>Todas las Reservas</h2>
          </div>
        </div>
        <div id="listaContainer" class="lista-container">
          <div class="placeholder">Cargando cotizaciones...</div>
        </div>
      </section>
    </div>

  </section>
</AdminLayout>

<script>
  import '@scripts/reservas.ts'
</script>

<style>
  /* ===== BASE ===== */
  .panel {
    width: 100%;
    max-width: 1600px;
  }

  .panel__header {
    display: flex;
    justify-content: space-between;
    gap: 2rem;
    align-items: flex-end;
    margin-bottom: 2rem;
    flex-wrap: wrap;
  }

  /* ===== FILTERS ===== */
  .filters-card { padding: 1.25rem 2rem; margin-bottom: 1.5rem; }
  .filters-card .card__header { display: none; }

  .filters {
    display: flex;
    gap: 1rem;
    align-items: flex-end;
    flex-wrap: wrap;
  }

  .filter-group {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
    flex: 1;
    min-width: 120px;
  }

  .filter-group label {
    font-size: 0.68rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
  }

  /* ===== VIEW TOGGLE ===== */
  .view-toggle {
    display: flex;
    gap: 0.25rem;
    background: var(--surface);
    padding: 0.35rem;
    border-radius: 14px;
    border: 1px solid var(--border);
  }

  .view-toggle__btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.55rem 1.1rem;
    background: transparent;
    border: none;
    border-radius: 10px;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 0.875rem;
    font-weight: 600;
    font-family: inherit;
  }

  .view-toggle__btn:hover { color: var(--text); background: var(--surface-hover); }
  .view-toggle__btn.active { background: var(--primary); color: white; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.35); }

  /* ===== VIEWS ===== */
  .vista-content { display: none; }
  .vista-content.active { display: block; }

  /* ===== CALENDAR ===== */
  .calendar { display: flex; flex-direction: column; gap: 1.25rem; }

  .calendar__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
  }

  .calendar__nav { display: flex; align-items: center; gap: 1.25rem; }

  .calendar__nav h3 {
    margin: 0;
    font-size: 1.3rem;
    color: var(--text);
    font-weight: 600;
    min-width: 200px;
    text-align: center;
    text-transform: capitalize;
  }

  .btn-nav {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text-muted);
    width: 34px;
    height: 34px;
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .btn-nav:hover { background: var(--surface-hover); border-color: var(--border-hover); color: var(--text); }

  .calendar__legend { display: flex; gap: 0.5rem; align-items: center; color: var(--text-muted); font-size: 0.8rem; font-weight: 500; }
  .dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; flex-shrink: 0; }
  .dot--event { background: var(--primary); box-shadow: 0 0 6px var(--primary); }

  .calendar__weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    color: var(--text-faint);
    font-weight: 700;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    text-align: center;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--border);
  }

  .calendar__grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 0.5rem;
    min-height: 380px;
  }

  :global(.day) {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    min-height: 90px;
    padding: 0.6rem;
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
  }

  :global(.day:hover) { background: var(--surface-hover); border-color: var(--border-hover); transform: translateY(-1px); }
  :global(.day.is-today) { border-color: rgba(59, 130, 246, 0.5); background: rgba(59, 130, 246, 0.07); }
  :global(.day.is-selected) { background: rgba(59, 130, 246, 0.12); border-color: var(--primary); box-shadow: 0 0 15px rgba(59, 130, 246, 0.2); }
  :global(.day.empty) { opacity: 0.4; border-style: dashed; cursor: default; }
  :global(.day.empty:hover) { transform: none; background: var(--surface); }

  :global(.day__number) { font-weight: 700; color: var(--text-muted); font-size: 0.85rem; }
  :global(.day.is-today .day__number) { color: var(--primary); }
  :global(.day.is-selected .day__number) { color: var(--text); }

  :global(.day__chips) { display: flex; flex-direction: column; gap: 0.2rem; }

  :global(.chip) {
    padding: 0.15rem 0.4rem;
    border-radius: 5px;
    font-size: 0.65rem;
    font-weight: 700;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  :global(.chip .dot) { width: 5px; height: 5px; flex-shrink: 0; }
  :global(.chip.state-pendiente) { background: rgba(251, 191, 36, 0.12); color: #fbbf24; }
  :global(.chip.state-aceptada) { background: rgba(52, 211, 153, 0.12); color: #34d399; }
  :global(.chip.state-rechazada) { background: rgba(248, 113, 113, 0.12); color: #f87171; }
  :global(.chip.state-otro) { background: var(--surface-hover); color: var(--text-muted); }
  :global(.chip.more) { background: rgba(167, 139, 250, 0.12); color: #a78bfa; }

  /* ===== DAY CARDS ===== */
  .day-list { display: flex; flex-direction: column; gap: 1rem; }
  .lista-container { display: flex; flex-direction: column; gap: 2rem; }

  .lista-day-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.5rem;
    margin: 0 0 1rem;
    color: var(--text);
    letter-spacing: 0.02em;
    text-transform: capitalize;
  }

  :global(.day-card) {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.25s ease;
    position: relative;
  }

  :global(.day-card:hover) {
    border-color: var(--border-hover);
    transform: translateY(-2px);
    box-shadow: 0 12px 30px -8px rgba(0, 0, 0, 0.3);
  }

  :global(.day-card--socio-pendiente) { border-left: 3px solid #fbbf24; }
  :global(.day-card--socio-aceptada)  { border-left: 3px solid #34d399; }
  :global(.day-card--socio-rechazada) { border-left: 3px solid #f87171; }

  :global(.card-menu) {
    position: absolute;
    top: 0.85rem;
    right: 0.85rem;
    z-index: 10;
  }

  :global(.card-menu__btn) {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text-muted);
    width: 30px;
    height: 30px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  :global(.card-menu__btn:hover) { background: var(--surface-hover); color: var(--text); }

  :global(.card-menu__dropdown) {
    position: absolute;
    top: calc(100% + 4px);
    right: 0;
    background: var(--modal-bg);
    border: 1px solid var(--card-border);
    border-radius: 10px;
    min-width: 140px;
    z-index: 100;
    display: none;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
  }

  :global(.card-menu__dropdown.open) { display: block; }

  :global(.card-menu__item) {
    width: 100%;
    background: none;
    border: none;
    color: #f87171;
    padding: 0.7rem 1rem;
    font: inherit;
    font-size: 0.875rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: background 0.15s ease;
  }

  :global(.card-menu__item:hover) { background: rgba(248, 113, 113, 0.1); }

  :global(.day-card__header) {
    padding: 1.25rem 3.5rem 1.25rem 1.25rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
    border-bottom: 1px solid var(--border);
  }

  :global(.day-card__title-section) { flex: 1; min-width: 0; }

  :global(.day-card__title) {
    margin: 0 0 0.25rem;
    font-size: 1rem;
    font-weight: 700;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  :global(.day-card__subtitle) {
    margin: 0;
    font-size: 0.8rem;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  :global(.day-card__salon) {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    background: rgba(59, 130, 246, 0.1);
    color: #93c5fd;
    border: 1px solid rgba(59, 130, 246, 0.2);
    padding: 0.3rem 0.7rem;
    border-radius: 8px;
    font-size: 0.78rem;
    font-weight: 600;
    white-space: nowrap;
    flex-shrink: 0;
  }

  [data-theme="light"] :global(.day-card__salon) { background: #eff6ff; color: #1d4ed8; border-color: #bfdbfe; }

  :global(.day-card__body) {
    padding: 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  :global(.info-grid) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.85rem 1.5rem;
  }

  :global(.info-grid--financial) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.85rem 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border);
  }

  :global(.info-item) { display: flex; flex-direction: column; gap: 0.2rem; }

  :global(.info-label) {
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    color: var(--text-faint);
    letter-spacing: 0.06em;
  }

  :global(.info-value) { font-size: 0.9rem; color: var(--text); font-weight: 500; }
  :global(.info-value.highlight) { font-size: 1.05rem; color: #93c5fd; font-weight: 700; }
  :global(.info-value.success) { color: #34d399; font-weight: 700; }
  :global(.info-value.warning) { color: #fbbf24; font-weight: 600; }
  [data-theme="light"] :global(.info-value.highlight) { color: #1d4ed8; }
  [data-theme="light"] :global(.info-value.success) { color: #059669; }
  [data-theme="light"] :global(.info-value.warning) { color: #b45309; }

  :global(.status-row) {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    padding-top: 0.75rem;
    border-top: 1px solid var(--border);
  }

  /* ===== ACTION BUTTONS (on cards) ===== */
  :global(.day-card__footer) {
    padding: 1rem 1.25rem;
    background: var(--surface);
    border-top: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  :global(.actions-section) { display: flex; flex-direction: column; gap: 0.4rem; }

  :global(.actions-label) {
    font-size: 0.62rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-faint);
    margin: 0;
  }

  :global(.actions-row) { display: flex; gap: 0.5rem; flex-wrap: wrap; }

  :global(.btn-action) {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.5rem 0.85rem;
    border-radius: 9px;
    font: inherit;
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    border: 1px solid transparent;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    white-space: nowrap;
  }

  :global(.btn-action:hover) { transform: translateY(-1px); }

  :global(.btn-action.primary) {
    background: rgba(59, 130, 246, 0.12);
    color: #93c5fd;
    border-color: rgba(59, 130, 246, 0.25);
  }
  :global(.btn-action.primary:hover) { background: rgba(59, 130, 246, 0.2); }

  :global(.btn-action.success) {
    background: rgba(52, 211, 153, 0.12);
    color: #34d399;
    border-color: rgba(52, 211, 153, 0.25);
  }
  :global(.btn-action.success:hover) { background: rgba(52, 211, 153, 0.2); }

  :global(.btn-action.danger) {
    background: rgba(248, 113, 113, 0.1);
    color: #f87171;
    border-color: rgba(248, 113, 113, 0.2);
  }
  :global(.btn-action.danger:hover) { background: rgba(248, 113, 113, 0.18); }

  :global(.btn-action.secondary) {
    background: var(--surface);
    color: var(--text-muted);
    border-color: var(--border);
  }
  :global(.btn-action.secondary:hover) { background: var(--surface-hover); color: var(--text); }

  [data-theme="light"] :global(.btn-action.primary) { background: #eff6ff; color: #1e40af; border-color: #bfdbfe; }
  [data-theme="light"] :global(.btn-action.success) { background: #f0fdf4; color: #166534; border-color: #bbf7d0; }
  [data-theme="light"] :global(.btn-action.danger) { background: #fef2f2; color: #b91c1c; border-color: #fecaca; }

  /* Legacy .link class */
  :global(.link) {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.5rem 0.85rem;
    border-radius: 9px;
    font: inherit;
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text-muted);
    transition: all 0.2s ease;
    text-decoration: none;
    white-space: nowrap;
  }
  :global(.link:hover) { background: var(--surface-hover); color: var(--text); }
  :global(.link.danger) { background: rgba(248, 113, 113, 0.08); color: #f87171; border-color: rgba(248, 113, 113, 0.2); }
  :global(.link.link--success) { background: rgba(52, 211, 153, 0.08); color: #34d399; border-color: rgba(52, 211, 153, 0.2); }

  /* ===== MODALS (reservas-specific — uses .show instead of .hidden) ===== */
  :global(.modal-overlay) {
    position: fixed;
    inset: 0;
    background: rgba(2, 6, 23, 0.85);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    padding: 1.5rem;
  }

  :global(.modal-overlay.show) { display: flex; }

  :global(.modal) {
    background: var(--modal-bg);
    border: 1px solid var(--card-border);
    border-radius: 20px;
    padding: 2rem;
    max-width: 580px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 50px 100px -20px rgba(0, 0, 0, 0.6);
  }

  :global(.modal__content) { color: var(--text); margin-bottom: 1.5rem; }
  :global(.modal__content h2), :global(.modal__content h3) { color: var(--text); margin: 0 0 1rem; }
  :global(.modal__content p) { color: var(--text-muted); margin: 0.5rem 0; }

  :global(.modal__icon) {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.75rem;
    margin: 0 auto 1rem;
  }

  :global(.modal__content--success .modal__icon) { background: rgba(52, 211, 153, 0.15); color: #34d399; }
  :global(.modal__content--error .modal__icon)   { background: rgba(248, 113, 113, 0.15); color: #f87171; }
  :global(.modal__content--info .modal__icon)    { background: rgba(59, 130, 246, 0.15); color: #93c5fd; }

  :global(.modal__input) {
    width: 100%;
    padding: 0.75rem 1rem;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    border-radius: 10px;
    font: inherit;
    color: var(--text);
    margin-top: 0.5rem;
    box-sizing: border-box;
    transition: all 0.2s ease;
  }
  :global(.modal__input:focus) { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15); }

  :global(.modal__actions) {
    display: flex;
    gap: 0.75rem;
    justify-content: flex-end;
    flex-wrap: wrap;
  }

  :global(.modal__actions .btn) {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    border: 1px solid transparent;
    border-radius: 10px;
    padding: 0.65rem 1.25rem;
    font-weight: 600;
    cursor: pointer;
    font: inherit;
    font-size: 0.9rem;
    transition: all 0.2s ease;
  }

  :global(.modal__actions .btn.primary) { background: var(--primary); color: white; border-color: var(--primary); }
  :global(.modal__actions .btn.primary:hover) { background: var(--primary-hover); transform: translateY(-1px); }
  :global(.modal__actions .btn.secondary) { background: var(--surface); color: var(--text-muted); border-color: var(--border); }
  :global(.modal__actions .btn.secondary:hover) { background: var(--surface-hover); color: var(--text); }
  :global(.modal__actions .btn.danger) { background: rgba(248, 113, 113, 0.12); color: #f87171; border-color: rgba(248, 113, 113, 0.25); }
  :global(.modal__actions .btn.danger:hover) { background: rgba(248, 113, 113, 0.22); }

  /* ===== MODAL DETAIL ===== */
  :global(.modal-detail) { text-align: left; }

  :global(.detail-section) {
    padding: 1rem 1.25rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    margin-bottom: 1rem;
  }

  :global(.detail-section--highlight) { background: rgba(52, 211, 153, 0.05); border-color: rgba(52, 211, 153, 0.2); }
  [data-theme="light"] :global(.detail-section--highlight) { background: #f0fdf4; border-color: #bbf7d0; }

  :global(.detail-section h3) {
    margin: 0 0 0.75rem !important;
    color: #93c5fd !important;
    font-size: 0.75rem !important;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: 'Outfit', system-ui, sans-serif !important;
  }

  [data-theme="light"] :global(.detail-section h3) { color: #1d4ed8 !important; }

  :global(.info-row) {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    padding: 0.4rem 0;
    border-bottom: 1px solid var(--border);
  }

  :global(.info-row:last-child) { border-bottom: none; }
  :global(.info-row__label) { font-size: 0.8rem; color: var(--text-muted); }
  :global(.info-row__value) { font-size: 0.875rem; color: var(--text); font-weight: 500; text-align: right; }

  /* ===== LOADING ===== */
  :global(.loading-overlay) {
    position: fixed;
    inset: 0;
    background: rgba(2, 6, 23, 0.9);
    backdrop-filter: blur(12px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3000;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  :global(.loading-overlay.show) { opacity: 1; }
  :global(.loading-spinner) { text-align: center; }

  :global(.spinner) {
    width: 50px;
    height: 50px;
    border: 4px solid var(--border);
    border-top: 4px solid var(--primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 0 auto 1.25rem;
  }

  @keyframes spin { to { transform: rotate(360deg); } }
  :global(.loading-text) { margin: 0; font-size: 1rem; font-weight: 500; color: var(--text-muted); }

  /* ===== ANIMATIONS ===== */
  .animate-fade-in { opacity: 0; animation: fade-in 0.8s ease forwards; }
  .animate-slide-up { opacity: 0; animation: slide-up 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
  @keyframes fade-in { to { opacity: 1; } }
  @keyframes slide-up { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 768px) {
    .card { padding: 1.25rem; }
    .calendar__grid { min-height: 280px; gap: 0.35rem; }
    :global(.day) { min-height: 70px; }
    .filters { flex-direction: column; }
    :global(.info-grid) { grid-template-columns: 1fr; }
    :global(.info-grid--financial) { grid-template-columns: 1fr; }
    :global(.day-card__header) { flex-direction: column; gap: 0.75rem; }
    .panel__header { flex-direction: column; align-items: flex-start; }
  }
</style>